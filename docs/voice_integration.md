# Голосовые (voice) — интеграция и ограничения

## Что умеет Telegram
- Классический бот получает **аудио/voice** и может расшифровать его только через внешний STT.
- Telegram Premium может делать voice→text на клиенте, но боту приходит уже текст. Мы работаем с текстом.

## Как это встраивается в HiDL
1. Клиент (или Premium-пользователь) переводит голос в текст.
2. Текст → `utils/nl_parser.parse_command(text)`.
3. В зависимости от типа команды:
   - `expense` → `handlers/finance.py` (добавить трату).
   - `reminder` → `handlers/custom_reminders.py` (создать напоминание).
   - `home` → `handlers/home_tasks.py` (показать план/уборка сейчас/отложить).
   - `ask` → `handlers/ask_mom.py` (найти карточку или попросить выбрать тему).
4. Если парсер не распознал — мягкий ответ с подсказкой примеров (см. `docs/nl_commands.md`).

## API-ожидания для внешнего STT
- Вход: raw voice → STT → текст (RU).
- Выход: plain text, без Markdown/emoji (добавим сами).
- Ограничения: не добавлять “/команды”, просто разговорный текст.

## Безопасность и тон
- Ответы — женский, тёплый тон, без шейминга.
- Никаких автоматических опасных действий: напоминания/дела создаём только после явного подтверждения, если есть сомнения.

## TODO для полного запуска
- Добавить обработчик voice в `handlers/talk.py`, который берёт подпись/распознанный текст и гоняет через `nl_parser`.
- Подключить внешний STT (отдельный сервис/функция), держать ключи в `.env` (не в репозитории).
