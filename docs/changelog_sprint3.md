# Changelog — Sprint 3 (в работе)

## Что сделано
- Документация:
  - `docs/architecture.md` — карта разделов, хендлеров, таблиц.
  - UX-спеки: `docs/ux_today.md`, `docs/ux_home.md`, `docs/ux_ask_mom.md`.
  - NL-команды: `docs/nl_commands.md`.
  - Голос: `docs/voice_integration.md`.
- Техдолг:
  - Row→dict helper `utils/rows.py`, применён в дом/финансы/напоминаниях.
  - ErrorLogMiddleware + `utils/logger.py`.
- UX / меню:
  - Главная кнопка «Поговорить» (заглушка /talk).
  - Дом: текст входа по спеке, меню укорочено.
  - Деньги: обновлены кнопки, отчёт показывает payday-summary, счета выводятся с датами.
- Натуральные команды:
  - Модуль `utils/nl_parser.py` и док.
  - Свободный ввод трат → автозапись.
  - Свободный ввод “напомни …” → создание напоминания.
  - Свободный вопрос в /ask_mom → поиск карточки.
- /today:
  - Безопасная обработка Row (рутины/напоминания/регулярка/счета).
- Dev UX:
  - `tests/smoke.py` для быстрых проверок импорта и mom_tips.
  - README дополнен командой дымового теста.
  - `scripts/run_dev.sh` для локального запуска, `CONTRIBUTING.md` с чеклистом.
- Дом:
  - Хендлеры регулярки и «Уборка сейчас» приводят Row→dict, убраны падения на sqlite3.Row.
  - «Уборка сейчас»: выбор типа → сил → зоны, добавлены подготовительные шаги (замачивание, мусор, посуда) и завершающий шаг для плиты/санузла.
  - План/все дела по дому: зона-иконки, подсказки по действиям, ограничение списка ближайших.
  - Добавлены быстрые сценарии «только полы/ванна/кухня/раковина», начисление очков за каждый шаг.
  - В Дом вынесено меню «Запахи/стирка» с быстрыми карточками (стиралка, кухня, ванна, комната).
- Напоминания:
  - UX добавления: пресеты Сегодня/Завтра/Раз в неделю/Одноразово, кнопки для дня недели.
  - Список редактируется и вызывается из /today без падений.
- /today:
  - Компактный дашборд, кнопки: Напоминания/План по дому/Финансы/Мои очки.
  - Ограничение длинных списков (рутины, напоминания, счета) до 3 элементов.
- Напоминания:
  - Кнопки из /today (`rem:list`, `rem:add`) показывают список/добавление без падений, мягкие предупреждения о паузе.
- Финансы:
  - Еженедельный отчёт даёт подсказку по дневному лимиту до зарплаты.
- Очки/статистика:
  - Статистика форматирует даты, рутинные списки безопасны для Row.
- Talk/LLM:
  - Заглушка `llm_client.py`, fallback в /talk использует тон пользователя и готов к подключению модели.

## В процессе
- Дом/уборка: “Уборка сейчас” UX, регулярка без спама, очки за пункты.
- Напоминания: диалог “добавить/когда/как часто”, показать/удалить без падений, лучшие тексты.
- Финансы: доп. форматирование сумм/дат, отчёт кнопками, ближайшие счета в /today.
- Тональность: пройтись по основным хендлерам, применить tone_ack/tone_error/register_text.
- Smoke-тесты: прогон всех кнопок (Дом/Напоминания/Деньги/Очки) без падений.

## Напоминание для разработчика
- Не коммитить токены/.env. Использовать `.env.example`.
- Читай `README.md`, `docs/architecture.md`, актуальный `sprints/sprint3.md` перед изменениями.
