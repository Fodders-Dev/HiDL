## HIDL Bot — бытовой помощник в Telegram
<img width="1024" height="1024" alt="ChatGPT Image 26 нояб  2025 г , 21_39_18" src="https://github.com/user-attachments/assets/b8785613-2b1d-48cb-a9b9-90ffa4be2bbd" />

Python + aiogram бот, который помогает взрослым держать быт под контролем: рутины утро/день/вечер, свои напоминания, финансы, домашние планы и «мамин» справочник.

## Как запустить локально
1. Python 3.11+ и SQLite (входит в Python).
2. Установи зависимости:
   ```bash
   python -m venv .venv
   source .venv/bin/activate
   pip install -r requirements.txt
   ```
3. Настрой .env:
   ```bash
   cp .env.example .env
   # впиши BOT_TOKEN из BotFather, DATABASE_URL можно оставить sqlite:///hidl.db
   ```
4. Старт:
   ```bash
   python main.py
   ```
   При первом запуске таблицы создадутся автоматически.

Дымовой тест перед пушем:
```bash
python -m tests.smoke
```

## Основные возможности
- Профиль: имя, часовой пояс, подъём/отбой, цели, режим ADHD/щадящий, тон общения.
- Рутины утро/день/вечер с чек-листами, можно закрыть частично; очки за отмеченные пункты.
- Вечернее/утреннее планирование дня: `/plan_tomorrow` и утренний пинг, дела учтены в очках и сводке.
- «Сегодня» — дашборд: очки и стрик, прогресс задач, ближайшие рутины, напоминания, дела по дому, счета, таблетки, продукты; кнопки Дом/Финансы/Очки.
- Свои напоминания: диалог «Напоминания» + быстрый парсер («напомни через 2 часа», «каждый вторник»), кнопка «Сделал/позже».
- Дом: регулярные дела (полотенца, постель, полы, санузел, холодильник, стиралка), план на неделю, список ближайших/всех дел, быстрые сценарии запахов и стирки.
- Финансы: лимит до зарплаты (день зарплаты, бюджет на еду/быт), траты текстом («потратил 700 вкусвилл еда»), отчёт за неделю, счета с напоминанием.
- Движение: разминка/домашние тренировки, прогулки, фокус 20/10 с кнопкой стоп, учёт веса/цели.
- Витамины и таблетки: раздел `/meds` + напоминания по времени, мягкие тексты без врачебных рекомендаций.
- «Спроси маму»: библиотека советов (стирка/кухня/уборка/деньги/дом/здоровье) с кнопками «Ещё совет» и «Сделать напоминанием»; свободный текст ищет по тегам.
- База знаний: тарелка дня по профилю питания, меню на неделю с покупками, быстрые рецепты и структурированные «быстрые блюда» с карточками и шагами.
- Кладовка продуктов: `/pantry` — что есть дома, количество и сроки годности, подсветка «скоро истечёт срок» в `/today`.

## Для Codex / ИИ-разработчика
- Прежде чем править код: прочитай `docs/architecture.md` (карта разделов/хендлеров/таблиц) и текущий спринт `sprints/sprint3.md`.
- UX-спеки: `docs/ux_today.md`, `docs/ux_home.md`, `docs/ux_ask_mom.md` — что должно видеть пользователем и какие кнопки.
- IDEAS/ — «кладовка» идей и исследовательских заметок:
  - `IDEAS/home_cleaning.md` — сценарии уборки, тон и лайфхаки;
  - `IDEAS/kitchen_food.md` — еда, pantry, рецепты и режимы питания;
  - `IDEAS/future_visions.md` — дальние планы по развитию HiDL.
- Ключевые файлы:
  - `handlers/*` — логика команд и кнопок; `utils/today.py` — дашборд; `db/repositories.py` — все CRUD.
  - Дом: `handlers/home_tasks.py`; финансы: `handlers/finance.py`; еда/рецепты: `handlers/guides.py`, `handlers/ask_mom.py`; кладовка: `handlers/pantry.py`.
  - План дня: `handlers/day_plan.py`; витамины/таблетки: `handlers/meds.py`.
  - Тон/тексты: `utils/texts.py`, `utils/tone.py`; напоминания: `handlers/custom_reminders.py`.
- При добавлении фич обновляй `/help` и спринт-план. Проверяй `git status` на отсутствие секретов.

## Безопасность
- Не коммить токены и .env — в `.gitignore` уже добавлено.
- Используй `.env.example` как шаблон.

## Статус
MVP развёрнут для публичного репозитория. База лайфхаков пополняется; STT/LLM в планах (см. `sprints/`).
